<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a temporary alternative representation of the graph to compute on — morph • tidygraph</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a temporary alternative representation of the graph to compute on — morph"><meta property="og:description" content="The morph/unmorph verbs are used to create temporary representations of
the graph, such as e.g. its search tree or a subgraph. A morphed graph will
accept any of the standard dplyr verbs, and changes to the data is
automatically propagated to the original graph when unmorphing. Tidygraph
comes with a range of morphers, but is it also possible to supply your own.
See Details for the requirement for custom morphers. The crystallise verb
is used to extract the temporary graph representation into a tibble
containing one separate graph per row and a name and graph column holding
the name of each graph and the graph itself respectively. convert() is a
shorthand for performing both morph and crystallise along with extracting
a single tbl_graph (defaults to the first). For morphs were you know they
only create a single graph, and you want to keep it, this is an easy way."><meta property="og:image" content="https://tidygraph.data-imaginist.com/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidygraph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2023/a-new-focus-on-tidygraph/" class="external-link">Version 1.3.0</a>
    </li>
    <li>
      <a href="https://www.data-imaginist.com/2018/tidygraph-1-1-a-tidy-hope/" class="external-link">Version 1.1.0</a>
    </li>
    <li>
      <a href="https://www.data-imaginist.com/2017/introducing-tidygraph/" class="external-link">Version 1.0.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a>
</li>
<li>
  <a href="https://github.com/thomasp85/tidygraph" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a temporary alternative representation of the graph to compute on</h1>
    <small class="dont-index">Source: <a href="https://github.com/thomasp85/tidygraph/blob/HEAD/R/morph.R" class="external-link"><code>R/morph.R</code></a></small>
    <div class="hidden name"><code>morph.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>morph</code>/<code>unmorph</code> verbs are used to create temporary representations of
the graph, such as e.g. its search tree or a subgraph. A morphed graph will
accept any of the standard <code>dplyr</code> verbs, and changes to the data is
automatically propagated to the original graph when unmorphing. Tidygraph
comes with a range of <a href="morphers.html">morphers</a>, but is it also possible to supply your own.
See Details for the requirement for custom morphers. The <code>crystallise</code> verb
is used to extract the temporary graph representation into a tibble
containing one separate graph per row and a <code>name</code> and <code>graph</code> column holding
the name of each graph and the graph itself respectively. <code>convert()</code> is a
shorthand for performing both <code>morph</code> and <code>crystallise</code> along with extracting
a single <code>tbl_graph</code> (defaults to the first). For morphs were you know they
only create a single graph, and you want to keep it, this is an easy way.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">morph</span><span class="op">(</span><span class="va">.data</span>, <span class="va">.f</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">unmorph</span><span class="op">(</span><span class="va">.data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crystallise</span><span class="op">(</span><span class="va">.data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crystallize</span><span class="op">(</span><span class="va">.data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">convert</span><span class="op">(</span><span class="va">.data</span>, <span class="va">.f</span>, <span class="va">...</span>, .select <span class="op">=</span> <span class="fl">1</span>, .clean <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.data</dt>
<dd><p>A <code>tbl_graph</code> or a <code>morphed_tbl_graph</code></p></dd>


<dt>.f</dt>
<dd><p>A morphing function. See <a href="morphers.html">morphers</a> for a list of provided one.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to the morpher</p></dd>


<dt>.select</dt>
<dd><p>The graph to return during <code>convert()</code>. Either an index or the
name as created during <code>crystallise()</code>.</p></dd>


<dt>.clean</dt>
<dd><p>Should references to the node and edge indexes in the original
graph be removed when using <code>convert</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>morphed_tbl_graph</code></p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>It is only possible to change and add to node and edge data from a
morphed state. Any filtering/removal of nodes and edges will not result in
removal from the main graph. However, nodes and edges not present in the
morphed state will be unaffected in the main graph when unmorphing (if new
columns were added during the morhped state they will be filled with <code>NA</code>).</p>
<p>Morphing an already morhped graph will unmorph prior to applying the new
morph.</p>
<p>During a morphed state, the mapping back to the original graph is stored in
<code>.tidygraph_node_index</code> and <code>.tidygraph_edge_index</code> columns. These are
accesible but protected, meaning that any changes to them with e.g. mutate
will be ignored. Furthermore, if the morph results in the merging of nodes
and/or edges the original data is stored in a <code>.data</code> column. This is
protected as well.</p>
<p>When supplying your own morphers the morphing function should accept a
<code>tbl_graph</code> as its first input. The provided graph will already have nodes
and edges mapped with a <code>.tidygraph_node_index</code> and <code>.tidygraph_edge_index</code>
column. The return value must be a <code>tbl_graph</code> or a list of <code>tbl_graph</code>s and
these must contain either a <code>.tidygraph_node_index</code> column or a
<code>.tidygraph_edge_index</code> column (or both). Note that it is possible for the
morph to have the edges mapped back to the original nodes and vice versa
(e.g. as with <a href="morphers.html">to_linegraph</a>). In that case the edge data in the morphed
graph(s) will contain a <code>.tidygraph_node_index</code> column and/or the node data a
<code>.tidygraph_edge_index</code> column. If the morphing results in the collapse of
multiple columns or edges the index columns should be converted to list
columns mapping the new node/edge back to all the nodes/edges it represents.
Furthermore the original node/edge data should be collapsed to a list of
tibbles, with the row order matching the order in the index column element.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="create_graphs.html">create_notable</a></span><span class="op">(</span><span class="st">'meredith'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="group_graph.html">group_infomap</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">morph</span><span class="op">(</span><span class="va">to_contracted</span>, <span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group_centrality <span class="op">=</span> <span class="fu"><a href="centrality.html">centrality_pagerank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">unmorph</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tbl_graph: 70 nodes and 140 edges</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># An undirected simple graph with 1 component</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Node Data: 70 × 2 (active)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group group_centrality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>     1              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>     2              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>     2              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>     2              0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 60 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Edge Data: 140 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    from    to</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     1     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     1     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 137 more rows</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

